extends layout

append stylesheets
    link(rel='stylesheet' href="/stylesheets/chat.css")

block content
    div(ng-controller="chatController")
        .wrapper
            .container
                .left
                    .top
                        ul.tab
                            li.conversations(ng-click="changeTab(1)")
                                a(ng-class="{active: activeTab ===1}")  Chatlar
                            li.onlineUsers(ng-click="changeTab(2)")
                                a(ng-class="{active: activeTab ===2}")  Tarmoqda

                    .tabArea
                        .tab-left(ng-show="activeTab === 1")
                            ul.people
                                li.person(
                                    ng-repeat="room in roomList",
                                    ng-click="switchRoom(room)"
                                )
                                    span.name  {{ room.name }}

                        .tab-right(ng-show="activeTab === 2")
                                ul.people
                                    li.person(ng-repeat="user in onlineList")
                                        img(ng-src="{{ user.meta.profilePhotoUrl }}")
                                        span.name {{ user.meta.name }} {{ user.meta.surname }}
                                        //- span.preview Juda hayron qoldim...
                    .bottom
                        button(ng-click="newRoom()") Yangi Xona
                .right(ng-show="chatClicked")
                    .top
                        span
                            span.name {{ chatName }}
                    .chat.active-chat
                        .bubble.you(ng-repeat="data in messages[roomId]")
                            span {{ data.name }} {{ data.username }}
                            | {{ data.message }}
                    .write
                        form(ng-submit="newMessage()")
                            input(placeholder='Xabarni yozing...', ng-model="message")
                            a.write-link.send(ng-click="newMessage()")

append javascripts
    script(src="http://localhost:3000/socket.io/socket.io.js")
    script(src="/javascripts/services/chatFactory.js")
    script(src="/javascripts/controller/chatController.js")